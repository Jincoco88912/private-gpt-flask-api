<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>電影播放與評論區</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .video-container {
            background-color: #000;
            color: #fff;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            height: 400px; /* 增加高度 */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .comment-section {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
        }
        .comment {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        .comment-header {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .username {
            font-weight: bold;
            color: #0099cc;
        }
        .comment-date {
            color: #999;
            font-size: 0.8em;
            margin-left: 10px;
        }
        .comment-content {
            margin-left: 40px;
        }
        .likes {
            color: #999;
            font-size: 0.9em;
            margin-top: 5px;
        }
        .reply-button {
            color: #0099cc;
            cursor: pointer;
            margin-left: 40px;
        }
        .replies {
            margin-left: 40px;
            border-left: 2px solid #eee;
            padding-left: 10px;
        }
    </style>
</head>
<body>
    <div class="video-container">
        <h2>電影播放區域</h2>
        <p>此線路暫時無法播放<br>請切換下方其他線路</p>
    </div>

    <div class="comment-section" id="commentSection">
        <!-- 評論將通過 JavaScript 動態添加 -->
    </div>

    <script>
        // 模擬的評論數據
        const comments = [
            { id: '1', movie_id: 'movie1', comment_id: '7fdf5243-d2f9-49ff-8bb7-6af6d0645078', parent_comment_id: null, UserName: '中蘭風格 唧"噗"及"膚"', CommentText: '算開啟rts', CommentDate: '2021-01-03 16:02:40', likes: 5 },
            { id: '2', movie_id: 'movie1', comment_id: 'ab356619-0248-4438-84ac-c5147e7ae406', parent_comment_id: null, UserName: '亮晶晶好棒 非常讚', CommentText: '辦法順', CommentDate: '2022-02-09 12:41:59' },
            { id: '3', movie_id: 'movie1', comment_id: '56a40255-39c6-421f-ab97-52a6694f970e', parent_comment_id: null, UserName: 'Blackway 好讚', CommentText: '研究這個，', CommentDate: '2022-04-25 05:58:16' },
            { id: '4', movie_id: 'movie1', comment_id: 'a49c6345-5452-4b40-b5f6-3c0360e24bab', parent_comment_id: null, UserName: '2014 求拿子買點', CommentText: 'CCCCCCCCCCCC', CommentDate: '2022-05-30 19:37:30' },
            { id: '5', movie_id: 'movie1', comment_id: '37fdcf69-ec43-485e-9d3c-012a7d6ce481', parent_comment_id: null, UserName: '純粹宅', CommentText: '最近也在研究這個，但是我aida64沒辦法順利顯示fps，就算開啟rtss也一樣', CommentDate: '2022-07-16 21:29:28' },
            { id: '6', movie_id: 'movie1', comment_id: '0d1947ff-a8ef-4992-afd1-656c9c06a543', parent_comment_id: '37fdcf69-ec43-485e-9d3c-012a7d6ce481', UserName: '回覆者', CommentText: '這是一個回覆', CommentDate: '2022-07-17 10:00:00' }
        ];

        function createCommentElement(comment) {
            const commentDiv = document.createElement('div');
            commentDiv.className = 'comment';
            commentDiv.innerHTML = `
                <div class="comment-header">
                    <img src="https://cdn-icons-png.flaticon.com/512/3237/3237472.png" alt="Avatar" class="avatar">
                    <span class="username">${comment.UserName}</span>
                    <span class="comment-date">${comment.CommentDate}</span>
                </div>
                <div class="comment-content">
                    <p>${comment.CommentText}</p>
                </div>
                ${comment.likes ? `<div class="likes">${comment.likes} 个赞</div>` : ''}
                <div class="reply-button" onclick="showReplyForm('${comment.id}')">回覆</div>
                <div class="replies" id="replies-${comment.id}"></div>
            `;
            return commentDiv;
        }

        function showReplyForm(parentId) {
            console.log(`Show reply form for comment ${parentId}`);
            // 這裡可以實現顯示回覆表單的邏輯
        }

        function renderComments() {
            const commentSection = document.getElementById('commentSection');
            commentSection.innerHTML = '';

            const topLevelComments = comments.filter(c => c.parent_comment_id === null);
            topLevelComments.forEach(comment => {
                const commentElement = createCommentElement(comment);
                commentSection.appendChild(commentElement);

                const replies = comments.filter(c => c.parent_comment_id === comment.id);
                const repliesContainer = commentElement.querySelector(`#replies-${comment.id}`);
                replies.forEach(reply => {
                    repliesContainer.appendChild(createCommentElement(reply));
                });
            });
        }

        // 初始渲染評論
        renderComments();
    </script>
</body>
</html>
